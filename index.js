import{n as h,e as de,a as Y,A as F,q as O,y,b as t,u as We,k as A,d as _,c as he,E as Me,R as Te,f as j,L as ke}from"./vendor.js";import{D as Se}from"./device-card.js";import"./index.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();const ne="192.168.4.1",Le=1e4;class Be{constructor(e={}){this.messageSubscribers=[],this.statusSubscribers=[],this.testing=void 0,this.isConnected=!1,this.onLoadingEnd=e.onLoadingEnd}connect(e){setTimeout(()=>{this.isConnected=!0,this.notifyStatus("connected")},500)}disconnect(){this.isConnected=!1,this.notifyStatus("disconnected")}reconnect(){this.disconnect(),this.connect("")}send(e){console.log("[MockSocket] Sending:",e),setTimeout(()=>{if((e==null?void 0:e.driver)==="find"&&(e==null?void 0:e.cmd)==="start"&&this.emitMessage({driver:"find",cmd:"stop",count:64}),(e==null?void 0:e.driver)==="update"){const r=[2,4,6,7,96,98,128],n=Object.fromEntries(Array.from({length:13},(i,c)=>[`d${c}`,[c,r[Math.floor(Math.random()*r.length)]]]));this.emitMessage({driver:"update",count:64,drivers:n})}if((e==null?void 0:e.driver)==="test"&&(e==null?void 0:e.cmd)==="start"&&(e==null?void 0:e.addres)!==void 0&&(this.testing=e==null?void 0:e.addres,this.emitMessage({driver:"test",cmd:"on",addres:e==null?void 0:e.addres})),e==="status"&&this.emitMessage("free"),(e==null?void 0:e.driver)==="test"&&(e==null?void 0:e.cmd)==="stop"&&(e==null?void 0:e.addres)!==void 0&&this.emitMessage({driver:"test",cmd:"stop",status:"ok"}),(e==null?void 0:e.master)==="scan"){const r=["MyWiFi","OfficeNet","Guest123","RedmiOasdasdasdasdasdne","Sosedi","Mazda","XBOXasdasdasdasd","TANK","RedmiOne","Sosedi","Mazda","XBOX","TANK"];this.emitMessage({master:"scan",cmd:"stop",ssid:r})}(e==null?void 0:e.master)==="net"&&this.emitMessage({master:"net",cmd:"ok"}),e==="Connected"&&this.emitMessage("Connected"),(e==null?void 0:e.master)==="bus"&&(e==null?void 0:e.cmd)==="state"&&this.emitMessage({master:"bus",cmd:"state",state:1}),(e==null?void 0:e.driver)==="settyngs"&&(e==null?void 0:e.cmd)==="download"&&typeof(e==null?void 0:e.addres)=="number"&&this.emitMessage({driver:"settyngs",cmd:"download",dr_settyngs:[e==null?void 0:e.addres,98,156,156,30,50,30,50,0,5,55]}),(e==null?void 0:e.driver)==="settyngs"&&(e==null?void 0:e.cmd)==="save"&&this.emitMessage({driver:"settyngs",cmd:"save",state:"ok"}),(e==null?void 0:e.rooms)==="search"&&(e==null?void 0:e.cmd)==="start"&&this.emitMessage({rooms:"search",cmd:"download",roomsArr:[{idRoom:h(),roomName:"Коридор",drivers:{d0:[0,1],d1:[1,4]},groups:[{idGroup:h(),groupName:"Центральный свет",driverAddresses:{d0:[18,7],d1:[19,4],d2:[20,4]}},{idGroup:h(),groupName:"Гараж",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Подсветка по периметру",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Подсобное помещение",driverAddresses:{d3:[31,6],d4:[42,4],d5:[53,8]}}]},{idRoom:h(),roomName:"Спальня",drivers:{d0:[4,7],d1:[5,4]},groups:[{idGroup:h(),groupName:"Все включено",driverAddresses:{d0:[18,7],d1:[19,4],d2:[20,4]}},{idGroup:h(),groupName:"Ночной режим",driverAddresses:{d3:[31,6],d4:[42,4],d5:[53,8]}}]},{idRoom:h(),roomName:"Гостинная",drivers:{d6:[24,4],d7:[25,4],d8:[26,6]},groups:[{idGroup:h(),groupName:"Центральный свет",driverAddresses:{d0:[18,7],d1:[19,4],d2:[20,4]}},{idGroup:h(),groupName:"Уход",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Встреча гостей",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Романтика",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Свет везде",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Подсветка по периметру",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Обеденный свет",driverAddresses:{d3:[31,6],d4:[42,4],d5:[53,8]}}]}]}),(e==null?void 0:e.rooms)==="search"&&(e==null?void 0:e.cmd)==="start"&&this.emitMessage({rooms:"search",cmd:"download",roomsArr:[{idRoom:h(),roomName:"Коридор",drivers:{d0:[0,1],d1:[1,4]},groups:[{idGroup:h(),groupName:"Центральный свет",driverAddresses:{d0:[18,7],d1:[19,4],d2:[20,4]}},{idGroup:h(),groupName:"Гараж",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Подсветка по периметру",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Подсобное помещение",driverAddresses:{d3:[31,6],d4:[42,4],d5:[53,8]}}]},{idRoom:h(),roomName:"Спальня",drivers:{d0:[4,7],d1:[5,4]},groups:[{idGroup:h(),groupName:"Все включено",driverAddresses:{d0:[18,7],d1:[19,4],d2:[20,4]}},{idGroup:h(),groupName:"Ночной режим",driverAddresses:{d3:[31,6],d4:[42,4],d5:[53,8]}}]},{idRoom:h(),roomName:"Гостинная",drivers:{d6:[24,4],d7:[25,4],d8:[26,6]},groups:[{idGroup:h(),groupName:"Центральный свет",driverAddresses:{d0:[18,7],d1:[19,4],d2:[20,4]}},{idGroup:h(),groupName:"Уход",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Встреча гостей",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Романтика",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Свет везде",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Подсветка по периметру",driverAddresses:{d3:[21,6],d4:[22,4],d5:[23,8]}},{idGroup:h(),groupName:"Обеденный свет",driverAddresses:{d3:[31,6],d4:[42,4],d5:[53,8]}}]}]})},2e3)}onMessage(e){return this.messageSubscribers.push(e),()=>{this.messageSubscribers=this.messageSubscribers.filter(r=>r!==e)}}onStatus(e){return this.statusSubscribers.push(e),()=>{this.statusSubscribers=this.statusSubscribers.filter(r=>r!==e)}}delay(e){return new Promise(r=>setTimeout(r,e))}notifyStatus(e){this.statusSubscribers.forEach(r=>r(e))}emitMessage(e){this.messageSubscribers.forEach(r=>r(e))}}const w=new Be,Ae="_drawer_1sl5f_1",Re="_active_1sl5f_16",$e="_menu_1sl5f_22",Ge="_activeLink_1sl5f_43",E={drawer:Ae,active:Re,menu:$e,activeLink:Ge};var V=(s=>(s.PENDING="pending",s.CONNECTED="connected",s.DISCONNECTED="disconnected",s.ERROR="error",s))(V||{});const a=de({socketURL:window.location.hostname,socketStatus:V.DISCONNECTED,wifiNetworks:[],settingsDriver:[],updatedDevices:{},rooms:[],groups:Array(16).fill(!1),countDrivers:void 0,onlineCountDrivers:void 0,testingDriverAddress:void 0,stateBus:void 0}),b=de({isActiveMenu:!1,isLoadingUI:!1,isLoadingIntervalStatus:!1}),Oe=()=>{const{url:s,route:e}=Y(),r=F(null),n=O(i=>{b.value={...b.value,isActiveMenu:!1},e(i)},[]);return y(()=>{const i=c=>{r.current&&!r.current.contains(c.target)&&(b.value={...b.value,isActiveMenu:!1})};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]),t("div",{ref:r,className:`${E.drawer} ${b.value.isActiveMenu?E.active:""}`,children:t("div",{className:E.menu,children:[t("div",{className:s==="/service/devices"?E.activeLink:"",onClick:()=>n("/service/devices"),children:"Драйверы"}),t("div",{className:s==="/settings"?E.activeLink:"",onClick:()=>n("/settings"),children:"Wi-Fi"}),t("div",{className:s==="/broadcast"?E.activeLink:"",onClick:()=>n("/broadcast"),children:"Broadcast"})]})})},Ee="_header_1898u_1",Pe="_burgerBtn_1898u_18",ze="_burgerBtnItem_1898u_27",Fe="_stateBusIndicatorActive_1898u_80",Ve="_stateBusIndicatorDisabled_1898u_89",He="_title_1898u_98",$={header:Ee,burgerBtn:Pe,burgerBtnItem:ze,stateBusIndicatorActive:Fe,stateBusIndicatorDisabled:Ve,title:He},Ue=s=>{if(s==="/")return"Главная";if(s==="/service/devices")return"Поиск драйверов";if(s==="/service/sensors")return"Сенсоры";if(s==="/broadcast")return"Broadcast";if(s.startsWith("/service/devices/")){const n=Y().path.split("/");return`Драйвер №${n[n.length-1]}`}return s.startsWith("/service/sensors/")?"Сенсор":s==="/service/rooms"?"Помещения и группы":s==="/settings"?"Настройки Wi-Fi":"Страница"},qe=({width:s=24,height:e=24,scale:r=1,color:n="#ffffff",backgroundColor:i="#141414",className:c=""})=>{const l=typeof s=="number"?s*r:s,u=typeof e=="number"?e*r:e;return t("svg",{width:l,height:u,viewBox:"0 0 439.488 443.88",class:`info-icon ${c}`,xmlns:"http://www.w3.org/2000/svg",children:[t("path",{d:"M219.744 443.88C341.103 443.88 439.488 344.51 439.488 221.94C439.488 99.368 341.103 0 219.744 0C98.387 0 0 99.368 0 221.94C0 344.51 98.387 443.88 219.744 443.88z",fill:n}),t("path",{d:"M219.744 392.714C313.128 392.714 388.83 316.255 388.83 221.94C388.83 127.623 313.128 51.166 219.744 51.166C126.362 51.166 50.659 127.623 50.659 221.94C50.659 316.255 126.362 392.714 219.744 392.714z",fill:i}),t("path",{d:"M196.963 300.274L246.494 300.172L246.494 261.69C246.494 251.252 251.36 241.39 264.38 232.849C277.399 224.312 313.744 206.988 313.744 161.44C313.744 115.89 275.577 84.582 243.494 77.94C211.416 71.298 176.659 75.668 151.994 102.69C129.907 126.887 125.253 146.027 125.253 188.255L174.744 188.255L174.744 178.44C174.744 155.939 177.347 132.186 209.494 125.69C227.04 122.144 243.488 127.648 253.244 137.19C264.404 148.102 264.494 172.69 246.711 184.933L218.815 203.912C202.543 214.35 196.963 225.971 196.963 243.051L196.963 300.274z",fill:n}),t("path",{d:"M196.638 370.692L196.638 319.687L246.85 319.687L246.85 370.692L196.638 370.692z",fill:n})]})};function je(){a.value.socketStatus;const s=Y(),{params:e}=We(),r=Ue(s.path);return t(A,{children:[t("div",{className:$.header,children:t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"500px",margin:"0 auto"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"14px",flex:"0 0 auto"},children:t("div",{className:$.burgerBtn,onClick:()=>{b.value={...b.value,isActiveMenu:!b.value.isActiveMenu}},children:[t("div",{className:$.burgerBtnItem}),t("div",{className:$.burgerBtnItem}),t("div",{className:$.burgerBtnItem})]})}),t("div",{className:$.title,children:r}),t("div",{style:{display:"flex",gap:"8px"},children:[t("div",{className:a.value.socketStatus===V.CONNECTED?$.stateBusIndicatorActive:$.stateBusIndicatorDisabled}),t(qe,{})]})]})}),t(Oe,{})]})}const Ke="_wrapper_h7i63_1",Xe={wrapper:Ke},Qe=({children:s})=>t("div",{className:Xe.wrapper,children:s});function H(){const[s,e]=_(!1),[r,n]=_(!1),[i,c]=_(!1),[l,u]=_(!1),[f,v]=_(!1),[p,m]=_(!1),[D,x]=_(!1);return y(()=>{const W=()=>{e(window.innerWidth<=599),n(window.innerWidth<=1100),c(window.innerWidth<=380),u(window.innerWidth<=360),v(window.innerWidth<=340),m(window.innerWidth<=400),x(window.innerWidth<=440)};return W(),window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),{isMobile:s,isMobile1100:r,isMobile380:i,isMobile360:l,isMobile340:f,isMobile400:p,isMobile440:D}}const Ye="_toastContainer_c3ggs_3",Je="_toast_c3ggs_3",Ze="_fadeIn_c3ggs_1",et="_fadeOut_c3ggs_1",tt="_success_c3ggs_28",st="_warning_c3ggs_33",rt="_error_c3ggs_38",ie={toastContainer:Ye,toast:Je,fadeIn:Ze,fadeOut:et,success:tt,warning:st,error:rt},P=de([]);let nt=0;class it{create(e,r,n=3e3){const i=++nt;P.value=[...P.value,{id:i,message:e,type:r}],setTimeout(()=>this.hide(i),n)}showSuccess(e,r){this.create(e,"success",r)}showWarning(e,r){this.create(e,"warning",r)}showError(e,r){a.value.socketStatus===V.CONNECTED?this.create(e,"error",r):this.create("Нет связи с мастером","error",r)}hide(e){P.value=P.value.filter(r=>r.id!==e)}}const C=new it,ot=()=>{const[s,e]=_(P.value);return y(()=>P.subscribe(n=>e(n)),[]),t("div",{className:ie.toastContainer,children:s.map(r=>t("div",{className:`${ie.toast} ${ie[r.type]}`,onClick:()=>C.hide(r.id),children:r.message},r.id))})},ct="_layoutContainer_6dz2s_1",lt={layoutContainer:ct},o={findDriver:null,updateDrivers:null,saveDrivers:null,saveSettingsDriver:null,startTestDriver:null,saveWIFI:null,scanWIFI:null,stateBus:null,saveAP:null,levelBR:null},d={updateDrivers:0,saveDrivers:0,saveSettingsDriver:0,startTestDriver:0,saveWIFI:0,scanWIFI:0,saveAP:0,levelBR:0},dt=s=>{w.reconnect(s)},G=()=>{b.value={...b.value,isLoadingUI:!0}},fe=s=>{a.value={...a.value,onlineCountDrivers:s}},at=()=>{b.value={...b.value,isLoadingIntervalStatus:!1}},J=()=>{b.value={...b.value,isLoadingIntervalStatus:!0}},ut=()=>{o.findDriver!==null&&(clearTimeout(o.findDriver),o.findDriver=null),G(),w.send({driver:"find",cmd:"start"}),o.findDriver=window.setTimeout(()=>{C.showError("Нет связи с мастером"),N(),o.findDriver=null},5*6e4)};function ae(){o.updateDrivers&&(clearTimeout(o.updateDrivers),o.updateDrivers=null),d.updateDrivers=d.updateDrivers==null?0:d.updateDrivers,G(),w.send({driver:"update",cmd:"start"}),o.updateDrivers=window.setTimeout(()=>{d.updateDrivers<1?(d.updateDrivers=d.updateDrivers+1,ae()):(C.showError("Нет связи с мастером при обновлении"),N(),clearTimeout(o.updateDrivers),o.updateDrivers=null,d.updateDrivers=0)},3e4)}function vt(s){o.saveDrivers&&(clearTimeout(o.saveDrivers),o.saveDrivers=null),d.saveDrivers=d.saveDrivers==null?0:d.saveDrivers,G(),w.send({...s}),o.saveDrivers=window.setTimeout(()=>{d.saveDrivers<1?(d.saveDrivers=d.saveDrivers+1,vt(s)):(C.showError("Нет связи с мастером при сохранении"),N(),clearTimeout(o.saveDrivers),o.saveDrivers=null,d.saveDrivers=0)},1e4)}function pt(s){const e="saveSettingsDriver";o[e]&&(clearTimeout(o[e]),o[e]=null),d[e]=d[e]==null?0:d[e],G(),w.send({...s}),o[e]=window.setTimeout(()=>{d[e]<1?(d[e]=d[e]+1,pt(s)):(C.showError("Нет связи при обновлении драйвера"),N(),clearTimeout(o[e]),o[e]=null,d[e]=0)},1e4)}function Z(s){if(s.cmd==="stop"){w.send({...s}),ee(void 0),clearTimeout(o.startTestDriver),o.startTestDriver=null,d.startTestDriver=0,ee();return}const e="startTestDriver";o[e]&&(clearTimeout(o[e]),o[e]=null),d[e]=d[e]==null?0:d[e],w.send({...s}),ee(Number(s==null?void 0:s.address)),o[e]=window.setTimeout(()=>{d[e]<1?(d[e]=d[e]+1,Z(s)):(C.showError("Нет связи при тестировании драйвера"),N(),clearTimeout(o[e]),o[e]=null,d[e]=0)},1e4)}function le(s){G();const e="saveWIFI";o[e]&&(clearTimeout(o[e]),o[e]=null),d[e]=d[e]==null?0:d[e],w.send({...s}),o[e]=window.setTimeout(()=>{d[e]<1?(d[e]=d[e]+1,le(s)):(C.showError("Нет связи при сохранеии WiFi настроек"),N(),clearTimeout(o[e]),o[e]=null,d[e]=0)},1e4)}function Ce(s){G();const e="scanWIFI";o[e]&&(clearTimeout(o[e]),o[e]=null),d[e]=d[e]==null?0:d[e],w.send({...s}),o[e]=window.setTimeout(()=>{d[e]<1?(d[e]=d[e]+1,Ce(s)):(C.showError("Нет связи при сканировании WiFi настроек"),N(),clearTimeout(o[e]),o[e]=null,d[e]=0)},1e4)}function me(s){w.send({...s})}const N=()=>{b.value={...b.value,isLoadingUI:!1}},ht=s=>{a.value={...a.value,wifiNetworks:s}},ft=s=>{a.value={...a.value,socketStatus:s}},mt=s=>{a.value={...a.value,rooms:s}},ee=s=>{a.value={...a.value,testingDriverAddress:s}};w.onStatus(s=>{ft(s)});const Ne=(s,e=!0)=>{e&&G(),w.send(s)};w.onMessage(s=>{console.log("onMessage",s),s.driver==="find"&&s.cmd==="stop"&&(o.findDriver!==null&&(clearTimeout(o.findDriver),o.findDriver=null),C.showSuccess(`Найдено драйверов: ${s.count}`),a.value={...a.value,countDrivers:s.count??0},ae()),s.driver==="update"&&s.count!==void 0&&(o.updateDrivers&&(clearTimeout(o.updateDrivers),o.updateDrivers=null),d.updateDrivers=0,a.value={...a.value,updatedDevices:s.drivers},C.showSuccess("Драйверы обновлены"),N()),s.driver==="test"&&(s.cmd==="on"||s.cmd==="off")&&s.addres!==void 0&&(clearTimeout(o.startTestDriver),o.startTestDriver=null,d.startTestDriver=0,N(),a.value={...a.value,testingDriverAddress:s.addres}),s.driver==="test"&&s.cmd==="stop"&&s.status==="ok"&&(clearTimeout(o.startTestDriver),o.startTestDriver=null,d.startTestDriver=0,C.showSuccess("Тестирование остановлено"),N(),ee()),s.driver==="settyngs"&&s.cmd==="download"&&Array.isArray(s.dr_settyngs)&&(clearTimeout(o.saveSettingsDriver),o.saveSettingsDriver=null,d.saveSettingsDriver=0,C.showSuccess("Настройки обновлены"),a.value={...a.value,settingsDriver:s.dr_settyngs},N()),s.driver==="settyngs"&&s.cmd==="save"&&s.state==="ok"&&(clearTimeout(o.saveDrivers),clearTimeout(o.levelBR),o.saveDrivers=null,o.levelBR=null,d.saveDrivers=0,d.levelBR=0,N(),C.showSuccess("Настройки сохранены")),s.master==="reset"&&s.cmd==="ok"&&N(),s.master==="bus"&&s.cmd==="state"&&(clearTimeout(o.stateBus),o.stateBus=null,a.value={...a.value,stateBus:s.state}),s.master==="net"&&s.cmd==="ok"&&(clearTimeout(o.saveWIFI),clearTimeout(o.saveAP),o.saveWIFI=null,o.saveAP=null,d.saveWIFI=0,d.saveAP=0,C.showSuccess("Настройки WiFi сохранены"),N()),s.master==="scan"&&s.cmd==="stop"&&Array.isArray(s.ssid)&&(ht(s.ssid),clearTimeout(o.scanWIFI),o.scanWIFI=null,d.scanWIFI=0,C.showSuccess("SSID получены"),N()),s.rooms==="search"&&s.cmd==="download"&&(mt(s.roomsArr),N())});const gt=({children:s})=>(H(),y(()=>(w.connect(a.value.socketURL),()=>{w.disconnect()}),[]),y(()=>{const e=w.onMessage(n=>{if(typeof n=="string"){if(n==="free"&&at(),n==="busy"&&J(),n!=null&&n.startsWith("sfd")){const i=parseInt(n.slice(3),10);J(),fe(i)}if(n!=null&&n.startsWith("sfs")){const i=parseInt(n.slice(3),10);J(),fe(i)}}}),r=window.setInterval(()=>{w.send("status")},Le);return()=>{e(),clearInterval(r)}},[]),y(()=>{a.value.socketStatus==="connected"&&(J(),Ne("status",!1))},[a.value.socketStatus]),t("div",{className:lt.layoutContainer,children:[t(je,{}),t(Qe,{children:s}),t(ot,{})]})),_t=()=>{const s=Y();return y(()=>{setTimeout(()=>{s.route("/service/devices")},0)},[s]),null},bt="_panel_1hyrc_11",yt="_wifiNetworksWrapper_1hyrc_94",wt="_wifiNetworks_1hyrc_94",Ct="_devices_1hyrc_159",Nt="_wrapperBtn_1hyrc_167",Dt="_content_1hyrc_204",xt="_settingsAndGroupWrapper_1hyrc_285",It="_buttonTabs_1hyrc_285",Wt="_buttonTabItemSettings_1hyrc_288",Mt="_buttonTabItemGroup_1hyrc_289",Tt="_buttonTabItemActiveSettings_1hyrc_317",kt="_buttonTabItemActiveGroup_1hyrc_318",St="_contentBody_1hyrc_345",I={panel:bt,wifiNetworksWrapper:yt,wifiNetworks:wt,devices:Ct,wrapperBtn:Nt,content:Dt,settingsAndGroupWrapper:xt,buttonTabs:It,buttonTabItemSettings:Wt,buttonTabItemGroup:Mt,buttonTabItemActiveSettings:Tt,buttonTabItemActiveGroup:kt,contentBody:St},Lt="_overlay_18mt4_2",Bt="_modal_18mt4_16",At="_modalContainer_18mt4_26",Rt="_fullScreen_18mt4_38",$t="_closeBtn_18mt4_45",Gt="_actions_18mt4_61",Ot="_buttonCancel_18mt4_69",Et="_buttonConfirm_18mt4_70",L={overlay:Lt,modal:Bt,modalContainer:At,fullScreen:Rt,closeBtn:$t,actions:Gt,buttonCancel:Ot,buttonConfirm:Et},Pt={xs:"360px",sm:"480px",md:"600px",lg:"800px",xl:"1000px"};function ue({open:s,onClose:e,children:r,maxWidth:n="sm",fullWidth:i=!1,fullScreen:c=!1,buttonsType:l="none",singleButtonText:u="Понятно",singleButtonAction:f,dualPrimaryButtonText:v="Да",dualPrimaryButtonAction:p,dualSecondaryButtonText:m="Нет",dualSecondaryButtonAction:D,showCloseButton:x=!0}){if(y(()=>{const R=U=>{U.key==="Escape"&&e()};return s&&document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[s]),!s)return null;const W=()=>{f?f():e()};return y(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),t("div",{className:L.overlay,onClick:e,children:t("div",{className:`${L.modal} ${c?L.fullScreen:""}`,style:{maxWidth:c||i?"100%":Pt[n]},onClick:R=>R.stopPropagation(),children:t("div",{className:L.modalContainer,children:[x&&t("button",{className:L.closeBtn,onClick:e,children:"×"}),r,l!=="none"&&t("div",{className:L.actions,children:[l==="dual"&&t(A,{children:[t("button",{className:L.buttonCancel,onClick:D||e,children:m}),t("button",{className:L.buttonConfirm,onClick:p,children:v})]}),l==="single"&&t("button",{className:L.buttonConfirm,onClick:W,style:{width:"100%"},children:u})]})]})})})}function ve(){const[s,e]=_(1);return y(()=>{const r=setInterval(()=>{e(n=>n%3+1)},500);return()=>clearInterval(r)},[]),t("div",{style:{position:"relative",display:"inline-block",paddingRight:"1px",fontSize:"18px"},children:["Подождите",t("span",{style:{position:"absolute",left:"100%",top:0,marginLeft:"4px"},children:".".repeat(s)})]})}const zt="_btn_cmid8_2",Ft="_lampWrapper_cmid8_50",ge={btn:zt,lampWrapper:Ft},De=({width:s=251.7,height:e=255.1,scale:r=1,stripesColor:n="#FFFF00",bulbColor:i="#FFFFFF",className:c="",animateStripes:l=!0,animationSpeed:u=1e3})=>{const f=typeof s=="number"?s*r:s,v=typeof e=="number"?e*r:e,[p,m]=_(1);return y(()=>{if(!l)return;const D=setInterval(()=>{m(x=>x===1?0:1)},u);return()=>clearInterval(D)},[l,u]),t("svg",{width:f,height:v,viewBox:"0 0 251.7 255.1",class:`light-bulb-icon ${c}`,xmlns:"http://www.w3.org/2000/svg",children:[t("g",{style:{opacity:l?p:1},children:[t("path",{fill:n,d:"M27.2,44l8.1-8.1l32,32L59.2,76L27.2,44z"}),t("path",{fill:n,d:"M27.3,188.1l32-32l8.1,8.1l-32,32L27.3,188.1z"}),t("path",{fill:n,d:"M189,67.9l32-32l8,8.1l-32,32L189,67.9z"}),t("path",{fill:n,d:"M189,164l8.1-8.1l32,32L221,196L189,164z"}),t("path",{fill:n,d:"M0,110.2h45.2v11.4H0V110.2z"}),t("path",{fill:n,d:"M206.5,110.2h45.2v11.4h-45.2V110.2z"}),t("path",{fill:n,d:"M122.2,0h11.4v45.2h-11.4C122.2,45.2,122.2,0,122.2,0z"})]}),t("g",{children:t("path",{fill:i,d:`M77.5,145.9c13.7,27.4,18.9,37.3,18.9,37.3l31.5,0.1l31.4,0.1c0,0,4.6-10,19.3-37.2c8.6-14.2,11.2-30.3,7.5-45.4
          c-3.7-14.8-13.2-27.4-26.8-35.5c-9.7-5.8-20.3-8.4-30.8-8.2c-10.5-0.2-21.2,2.3-30.9,8c-13.6,8-23.2,20.5-27,35.3
          C66.5,115.5,69.1,131.7,77.5,145.9L77.5,145.9z M81.9,103.4c3-11.7,10.7-21.6,21.5-28c7.8-4.6,16.4-6.6,24.8-6.4
          c8.4-0.1,17,1.9,24.8,6.6c10.8,6.4,18.4,16.4,21.3,28.1c3,12,0,24.5-6.1,36.4c-8.7,17.2-14.5,25.3-16.5,30.5h-47.8
          c-5.3-9.8-7.5-13.2-16.3-30.8C81.8,127.9,78.9,115.4,81.9,103.4L81.9,103.4z`})}),t("path",{fill:i,d:`M147.3,207.7v17.7c-1,9.8-9.1,17.7-18.5,17.7h-1.7c-10.1,0-18.6-9-18.6-19.7v-14.6h-0.1v-1.1L147.3,207.7 M159.3,195.7H96.4
        v25.1h0.1v2.6c0,17.4,13.8,31.7,30.6,31.7h1.7c16.8,0,30.6-14.3,30.6-31.7v-2.6h-0.1V195.7L159.3,195.7z`}),t("path",{fill:n,d:"M105.9,230.3h44.5v6h-44.5C105.9,236.3,105.9,230.3,105.9,230.3z"})]})},Q=({text:s="Кнопка",onClick:e,sx:r,lampVisible:n=!1})=>(H(),t("div",{className:ge.btn,style:{...r},id:"device-btn-update",onClick:i=>{a.value.socketStatus!==V.CONNECTED?C.showError("Нет связи с мастером"):e==null||e(i)},children:[t("span",{style:{visibility:n?"hidden":"visible"},children:[" ",`${s}`]}),n&&t("div",{className:ge.lampWrapper,children:t(De,{animateStripes:!0,animationSpeed:1e3})})]}));function Ks(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Vt(s=5e3){return new Promise((e,r)=>{let n=!1;const i=window.setTimeout(()=>{n||(l==null||l(),r(new Error("таймаут проверки мастера")))},s),c=u=>{u==="free"&&(clearTimeout(i),l==null||l(),n=!0,u==="free"&&e())},l=w.onMessage(c);w.send("status")})}function S(s,e=!0){return(...r)=>{e&&G(),Vt().then(()=>{s(...r)}).catch(n=>{N(),C.showError("Мастер занят, попробуйте чуть позже"),console.log("Мастер не свободен для",s.name,n)})}}const Ht=()=>{const[s,e]=_("ap"),[r,n]=_(""),[i,c]=_(""),[l,u]=_(""),[f,v]=_(!1),{isMobile440:p}=H(),m=b.value.isLoadingUI||b.value.isLoadingIntervalStatus,D=F(null),[x,W]=_(!1);O(()=>{Ne({master:"reset",cmd:"start"})},[]),O(()=>{l.length>0&&(dt(l),a.value={...a.value,socketURL:l})},[l]);const R=O(()=>{s==="host"?r.trim()&&i.trim()?(W(!0),S(le)({master:"net",cmd:"save",memory:"yes",mode:s,ssid:r,password:i})):alert("Пожалуйста, введите SSID и пароль"):s=="ap"&&(W(!0),S(le)({master:"net",cmd:"save",memory:"yes",mode:s}))},[r,i,s]),U=O(()=>{n(""),m||S(Ce)({master:"scan",cmd:"start"})},[m]);return y(()=>{x&&!m&&setTimeout(()=>{v(!0),W(!1)},0)},[x,m]),t("div",{className:I.devices,children:[t("div",{id:"drivers-list",className:I.content,children:t("div",{className:I.settingsAndGroupWrapper,children:[t("div",{className:I.buttonTabs,children:[t("div",{className:he(s==="ap"?I.buttonTabItemActiveSettings:I.buttonTabItemSettings),onClick:()=>e("ap"),children:p?t("span",{children:["Создать точку",t("br",{})," доступа"]}):t("span",{children:" Создать точку доступа"})}),t("div",{className:he(s==="host"?I.buttonTabItemActiveGroup:I.buttonTabItemGroup),onClick:()=>e("host"),children:p?t("span",{children:[" ","Подключиться",t("br",{})," к WiFi"]}):t("span",{children:" Подключиться к WiFi"})})]}),t("div",{className:I.contentBody,children:[s==="host"&&t("div",{className:I.panel,children:[t("div",{style:{display:"flex",flexDirection:"column",fontSize:"20px"},children:[t("div",{children:" Имя сети:"}),t("div",{ref:D,style:{position:"relative"},children:t("input",{autoComplete:"off",type:"text",id:"wifi-ssid",placeholder:"Введите имя сети",value:r,onInput:M=>{const te=M.target.value;n(te)}})})]}),t("label",{children:["Пароль:",t("input",{autoComplete:"off",type:"text",id:"wifi-password",placeholder:"Введите пароль",value:i,onInput:M=>c(M.target.value)})]}),t("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px"},children:t(Q,{text:"Сканировать WiFi",onClick:U,sx:{width:"auto"}})}),t("div",{className:I.wifiNetworksWrapper,children:t("div",{className:I.wifiNetworks,children:a.value.wifiNetworks.map(M=>t(Q,{text:M,onClick:()=>n(M),sx:{width:"auto"}}))})})]}),s==="ap"&&t(A,{})]})]})}),t(ue,{maxWidth:"md",open:f,onClose:()=>{},buttonsType:"none",singleButtonText:"Отмена",showCloseButton:!1,singleButtonAction:()=>{v(!1)},children:t(A,{children:t("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",gap:"40px",padding:"16px 0",marginBottom:"20px"},children:s==="ap"?t("div",{style:{fontSize:"20px",fontWeight:"600",textAlign:"center"},children:["Режим точки доступа запущен.",t("br",{}),"Подключитесь к сети DALI Master по адресу:",t("p",{children:t("a",{href:`http://${ne}`,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"white"},children:`http://${ne}`})}),t("button",{onClick:()=>{window.location.href=`http://${ne}`},style:{marginTop:"20px",padding:"12px 24px",backgroundColor:"#444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Перейти сейчас"})]}):t("div",{style:{fontSize:"20px",fontWeight:"600",textAlign:"center"},children:"Подключитесь к сети, которая указана на Мастер дисплее."})})})}),t("div",{className:I.wrapperBtn,children:m?t("div",{className:I.loadingText,children:t(ve,{})}):t(A,{children:t("div",{style:{display:"flex",gap:"20px"},children:t(Q,{text:s==="ap"?"Создать точку доступа":"Подключиться к сети",sx:{width:"auto"},onClick:()=>{R()}})})})})]})};function Xs(s,e){const r=[];for(let n=0;n<8;n++){const i=Math.pow(2,n);Math.floor(s/i)%2===1&&r.push(n)}for(let n=0;n<8;n++){const i=Math.pow(2,n);Math.floor(e/i)%2===1&&r.push(n+8)}return r.sort((n,i)=>n-i)}function Qs(s){let e=0,r=0;return s.forEach(n=>{n>=0&&n<8?e+=Math.pow(2,n):n>=8&&n<16&&(r+=Math.pow(2,n-8))}),{g07:e,g815:r}}const _e=({width:s=32,height:e=32,scale:r=1,color:n="#ffffff",className:i="",direction:c="right",double:l=!0,onClick:u,gap:f=8})=>{const v=typeof s=="number"?s*r:s,p=typeof e=="number"?e*r:e,m=typeof f=="number"?f*r:f,D=c==="left"?"scaleX(-1)":"scaleX(1)",x="M62.8,188.6L14.1,94.3L62.8,0h-14L0,94.3l48.7,94.3H62.8z";return t("svg",{onClick:()=>{u==null||u()},width:v,height:p,viewBox:"0 0 125.6 188.6",class:`double-arrow-icon ${i}`,xmlns:"http://www.w3.org/2000/svg",style:{transform:D,transformOrigin:"center",flexShrink:0},children:[t("defs",{children:t("style",{children:`.cls-1{fill:${n};}`})}),t("path",{class:"cls-1",d:x,transform:"translate(0,0)"}),l&&t("path",{className:"cls-1",d:x,transform:`translate(${62.8+m},0)`})]})},Ys=({width:s=56,height:e=56,scale:r=1,color:n="#ffffff",className:i=""})=>{const c=typeof s=="number"?s*r:s,l=typeof e=="number"?e*r:e;return t("svg",{width:c,height:l,viewBox:"0 0 24 24",class:`speaker-icon ${i}`,xmlns:"http://www.w3.org/2000/svg",style:{fill:n,flexShrink:0},children:t("g",{children:t("path",{d:`M19.164,19.547c-1.641-2.5-3.669-3.285-6.164-3.484v1.437c0,0.534-0.208,1.036-0.586,1.414
        c-0.756,0.756-2.077,0.751-2.823,0.005l-6.293-6.207C3.107,12.523,3,12.268,3,11.999s0.107-0.524,0.298-0.712l6.288-6.203
        c0.754-0.755,2.073-0.756,2.829,0.001C12.792,5.463,13,5.965,13,6.499v1.704c4.619,0.933,8,4.997,8,9.796v1
        c0,0.442-0.29,0.832-0.714,0.958c-0.095,0.027-0.19,0.042-0.286,0.042C19.669,19.999,19.354,19.834,19.164,19.547z
        M12.023,14.011c2.207,0.056,4.638,0.394,6.758,2.121c-0.768-3.216-3.477-5.702-6.893-6.08C11.384,9.996,11,10,11,10V6.503
        l-5.576,5.496l5.576,5.5V14C11,14,11.738,14.01,12.023,14.011z`})})})},Ut="_container_1t5q4_2",qt="_channelNumber_1t5q4_29",jt="_indicators_1t5q4_58",Kt="_dot_1t5q4_68",Xt="_dashes_1t5q4_81",Qt="_name_1t5q4_87",Yt="_button_1t5q4_97",Jt="_red_1t5q4_121",Zt="_green_1t5q4_125",es="_blue_1t5q4_129",ts="_white_1t5q4_133",ss="_warm_1t5q4_137",rs="_cold_1t5q4_141",K={container:Ut,channelNumber:qt,indicators:jt,dot:Kt,dashes:Xt,name:Qt,button:Yt,red:Jt,green:Zt,blue:es,white:ts,warm:ss,cold:rs},ns="_container_st7jg_1",is="_label_st7jg_11",os="_triangle_st7jg_21",oe={container:ns,label:is,triangle:os};function be({led:s}){return t("div",{className:oe.container,children:[s&&t("span",{className:oe.label,children:"LED"}),t("div",{className:oe.triangle})]})}const cs=({size:s=100,color:e="#fef7cb",strokeWidth:r=2})=>t("svg",{width:s,height:s*56/100,viewBox:"0 0 100 56",xmlns:"http://www.w3.org/2000/svg",children:t("g",{stroke:e,"stroke-width":r,"stroke-linecap":"round",fill:"none",children:[t("line",{x1:"2",y1:"35",x2:"30",y2:"35"}),t("line",{x1:"30",y1:"35",x2:"50",y2:"17"}),t("line",{x1:"56",y1:"35",x2:"95",y2:"35"})]})}),ls=({width:s=180,height:e=120,scale:r=1,mainColor:n="#ffeb3b",backColor:i="#ffeb3b",className:c=""})=>{const l=typeof s=="number"?s*r:s,u=typeof e=="number"?e*r:e;return t("svg",{width:l,height:u,viewBox:"0 0 180 120",className:`bulb-group ${c}`,xmlns:"http://www.w3.org/2000/svg",children:[t("g",{transform:"translate(30, 15) scale(0.7)",children:t("path",{d:"M69.294,11.442c-6.788-5.594-15.724-7.82-24.512-6.109C32.951,7.636,23.449,17.623,21.675,29.62c-1.447,9.79,2.031,19.567,9.304,26.155c3.277,2.968,5.254,7.243,5.568,12.039c0.006,0.087,0.023,0.171,0.042,0.254v15.039c0,0.828,0.671,1.5,1.5,1.5h1.495c0.609,4.359,3.813,7.697,7.672,7.697h6.81c3.859,0,7.062-3.338,7.671-7.697h1.495c0.828,0,1.5-0.672,1.5-1.5V67.828c0-0.003,0.001-0.006,0.001-0.01c0-4.462,2.026-8.771,5.706-12.133c6.062-5.538,9.538-13.415,9.538-21.61C79.978,25.287,76.084,17.037,69.294,11.442z M45.357,39.91h-2.305c-1.271,0-2.305-1.034-2.305-2.305s1.034-2.305,2.305-2.305s2.305,1.034,2.305,2.305V39.91z M55.966,37.605c0-1.271,1.034-2.305,2.306-2.305c1.271,0,2.305,1.034,2.305,2.305s-1.034,2.305-2.305,2.305h-2.303L55.966,37.605z M55.063,69.211h6.67v12.396H60.36c-0.003,0-0.006-0.001-0.01-0.001s-0.006,0.001-0.01,0.001H40.982c-0.003,0-0.006-0.001-0.01-0.001s-0.006,0.001-0.01,0.001H39.59V69.211h14.366 M48.357,66.211V42.91h4.617l0.034,23.301H48.357z M54.066,89.304h-6.81c-2.238,0-4.117-2.004-4.637-4.697h16.083C58.183,87.3,56.304,89.304,54.066,89.304z M68.416,53.471c-3.872,3.537-6.164,8.013-6.593,12.74h-5.816L55.974,42.91h2.298c2.925,0,5.305-2.38,5.305-5.305c0-2.925-2.38-5.305-5.305-5.305c-2.926,0-5.306,2.38-5.306,5.307l0.003,2.303h-4.612v-2.305c0-2.925-2.38-5.305-5.305-5.305c-2.925,0-5.305,2.38-5.305,5.305c0,2.925,2.38,5.305,5.305,5.305h2.305v23.301h-5.972c-0.636-5.005-2.864-9.465-6.393-12.66c-6.528-5.914-9.65-14.696-8.35-23.493c1.591-10.76,10.108-19.716,20.712-21.781c7.908-1.538,15.938,0.458,22.03,5.48c6.096,5.023,9.592,12.429,9.592,20.319C76.978,41.43,73.857,48.5,68.416,53.471z",fill:i,opacity:"0.8"})}),t("g",{transform:"translate(105, 15) scale(0.7)",children:t("path",{d:"M69.294,11.442c-6.788-5.594-15.724-7.82-24.512-6.109C32.951,7.636,23.449,17.623,21.675,29.62c-1.447,9.79,2.031,19.567,9.304,26.155c3.277,2.968,5.254,7.243,5.568,12.039c0.006,0.087,0.023,0.171,0.042,0.254v15.039c0,0.828,0.671,1.5,1.5,1.5h1.495c0.609,4.359,3.813,7.697,7.672,7.697h6.81c3.859,0,7.062-3.338,7.671-7.697h1.495c0.828,0,1.5-0.672,1.5-1.5V67.828c0-0.003,0.001-0.006,0.001-0.01c0-4.462,2.026-8.771,5.706-12.133c6.062-5.538,9.538-13.415,9.538-21.61C79.978,25.287,76.084,17.037,69.294,11.442z M45.357,39.91h-2.305c-1.271,0-2.305-1.034-2.305-2.305s1.034-2.305,2.305-2.305s2.305,1.034,2.305,2.305V39.91z M55.966,37.605c0-1.271,1.034-2.305,2.306-2.305c1.271,0,2.305,1.034,2.305,2.305s-1.034,2.305-2.305,2.305h-2.303L55.966,37.605z M55.063,69.211h6.67v12.396H60.36c-0.003,0-0.006-0.001-0.01-0.001s-0.006,0.001-0.01,0.001H40.982c-0.003,0-0.006-0.001-0.01-0.001s-0.006,0.001-0.01,0.001H39.59V69.211h14.366 M48.357,66.211V42.91h4.617l0.034,23.301H48.357z M54.066,89.304h-6.81c-2.238,0-4.117-2.004-4.637-4.697h16.083C58.183,87.3,56.304,89.304,54.066,89.304z M68.416,53.471c-3.872,3.537-6.164,8.013-6.593,12.74h-5.816L55.974,42.91h2.298c2.925,0,5.305-2.38,5.305-5.305c0-2.925-2.38-5.305-5.305-5.305c-2.926,0-5.306,2.38-5.306,5.307l0.003,2.303h-4.612v-2.305c0-2.925-2.38-5.305-5.305-5.305c-2.925,0-5.305,2.38-5.305,5.305c0,2.925,2.38,5.305,5.305,5.305h2.305v23.301h-5.972c-0.636-5.005-2.864-9.465-6.393-12.66c-6.528-5.914-9.65-14.696-8.35-23.493c1.591-10.76,10.108-19.716,20.712-21.781c7.908-1.538,15.938,0.458,22.03,5.48c6.096,5.023,9.592,12.429,9.592,20.319C76.978,41.43,73.857,48.5,68.416,53.471z",fill:i,opacity:"0.8"})}),t("g",{transform:"translate(60, 5) scale(0.85)",children:t("path",{d:"M69.294,11.442c-6.788-5.594-15.724-7.82-24.512-6.109C32.951,7.636,23.449,17.623,21.675,29.62c-1.447,9.79,2.031,19.567,9.304,26.155c3.277,2.968,5.254,7.243,5.568,12.039c0.006,0.087,0.023,0.171,0.042,0.254v15.039c0,0.828,0.671,1.5,1.5,1.5h1.495c0.609,4.359,3.813,7.697,7.672,7.697h6.81c3.859,0,7.062-3.338,7.671-7.697h1.495c0.828,0,1.5-0.672,1.5-1.5V67.828c0-0.003,0.001-0.006,0.001-0.01c0-4.462,2.026-8.771,5.706-12.133c6.062-5.538,9.538-13.415,9.538-21.61C79.978,25.287,76.084,17.037,69.294,11.442z M45.357,39.91h-2.305c-1.271,0-2.305-1.034-2.305-2.305s1.034-2.305,2.305-2.305s2.305,1.034,2.305,2.305V39.91z M55.966,37.605c0-1.271,1.034-2.305,2.306-2.305c1.271,0,2.305,1.034,2.305,2.305s-1.034,2.305-2.305,2.305h-2.303L55.966,37.605z M55.063,69.211h6.67v12.396H60.36c-0.003,0-0.006-0.001-0.01-0.001s-0.006,0.001-0.01,0.001H40.982c-0.003,0-0.006-0.001-0.01-0.001s-0.006,0.001-0.01,0.001H39.59V69.211h14.366 M48.357,66.211V42.91h4.617l0.034,23.301H48.357z M54.066,89.304h-6.81c-2.238,0-4.117-2.004-4.637-4.697h16.083C58.183,87.3,56.304,89.304,54.066,89.304z M68.416,53.471c-3.872,3.537-6.164,8.013-6.593,12.74h-5.816L55.974,42.91h2.298c2.925,0,5.305-2.38,5.305-5.305c0-2.925-2.38-5.305-5.305-5.305c-2.926,0-5.306,2.38-5.306,5.307l0.003,2.303h-4.612v-2.305c0-2.925-2.38-5.305-5.305-5.305c-2.925,0-5.305,2.38-5.305,5.305c0,2.925,2.38,5.305,5.305,5.305h2.305v23.301h-5.972c-0.636-5.005-2.864-9.465-6.393-12.66c-6.528-5.914-9.65-14.696-8.35-23.493c1.591-10.76,10.108-19.716,20.712-21.781c7.908-1.538,15.938,0.458,22.03,5.48c6.096,5.023,9.592,12.429,9.592,20.319C76.978,41.43,73.857,48.5,68.416,53.471z",fill:n})})]})},ds="_btn_ofqjr_2",as="_lampWrapper_ofqjr_51",us="_textGerenal_ofqjr_113",ce={btn:ds,lampWrapper:as,textGerenal:us},z=({text:s="Кнопка",onClick:e,textGerenal:r,sx:n,lampVisible:i=!1,disabled:c=!1})=>{const{isMobile380:l,isMobile360:u,isMobile340:f}=H(),v=()=>f?28:u?30:36;return t("div",{className:ce.btn,style:{...n},id:"device-btn-update",onClick:p=>{a.value.socketStatus!==V.CONNECTED?C.showError("Нет связи с мастером"):c||e==null||e(p)},children:[t("span",{style:{visibility:i?"hidden":"visible"},children:[" ",`${s} `]}),r&&t("span",{className:ce.textGerenal,children:r}),i&&t("div",{className:ce.lampWrapper,children:t(De,{animateStripes:!0,height:v(),width:v(),animationSpeed:1e3})})]})},vs={2:["warm","cold"],4:"triangle",6:"triangleWithLed",7:"rele",96:["red","green","blue"],98:["red","green","blue","white"],128:["red","green","blue","cold","warm"],group:"group"};function ps({address:s,editPencil:e=!1,type:r,onClick:n,onClickTest:i,onClickSettings:c,lampVisible:l,disabled:u=!1,...f}){const v=vs[`${r}`];return t("div",{className:`${K.container}`,...f,children:[t("span",{className:K.channelNumber,children:s}),t("div",{className:K.indicators,children:[Array.isArray(v)&&v.map((p,m)=>t("span",{className:`${K.dot} ${K[p]}`},p+m)),v==="triangleWithLed"&&t(be,{led:!0}),v==="triangle"&&t(be,{led:!1}),v==="rele"&&t(cs,{size:56,strokeWidth:5}),v==="group"&&t(ls,{})]}),t(z,{disabled:u,text:"Настройки",sx:{padding:"9px 7px"},onClick:p=>{c(),p.stopPropagation()}}),t(z,{disabled:u,text:"Тест",lampVisible:l,sx:{padding:"9px 7px"},onClick:p=>{i==null||i(),p.stopPropagation()}})]})}const hs="_driversList_nutbd_3",fs="_loadingText_nutbd_28",ms="_devices_nutbd_44",gs="_wrapperBtn_nutbd_55",_s="_totalCount_nutbd_94",bs="_paginationBar2_nutbd_110",ys="_arrowPagination_nutbd_123",ws="_dotsWrapper_nutbd_150",Cs="_dots_nutbd_150",Ns="_dot_nutbd_150",Ds="_active_nutbd_174",k={driversList:hs,loadingText:fs,devices:ms,wrapperBtn:gs,totalCount:_s,paginationBar2:bs,arrowPagination:ys,dotsWrapper:ws,dots:Cs,dot:Ns,active:Ds},xs=s=>new Promise(e=>setTimeout(e,s));function Is(){const s=F(null),{route:e}=Y(),[r,n]=_(!1),[i,c]=_(1),[l,u]=_([]),[f,v]=_(1),[p,m]=_(8);H();const[D,x]=_(!1),W=b.value.isLoadingUI||b.value.isLoadingIntervalStatus,R=a.value.socketStatus,U=O(()=>{n(!0)},[]),M=O(()=>{S(ae)()},[]),te=async g=>{if(a.value.testingDriverAddress===g){se();return}a.value.testingDriverAddress!==void 0?(se(),await xs(200),S(Z)({driver:"test",cmd:"start",addres:+g})):S(Z)({driver:"test",cmd:"start",addres:+g})},se=()=>{if(a.value.testingDriverAddress===void 0)return;S(Z)({driver:"test",cmd:"stop",addres:+a.value.testingDriverAddress})};y(()=>{if(s.current){const g=s.current.getBoundingClientRect().height,T=60,q=16,re=Math.round((g-20+q)/(T+q)),Ie=Math.max(1,re);m(Ie)}},[s.current]),y(()=>{const g=Object.keys(a.value.updatedDevices);if(g.length>0){const T=Math.ceil(g.length/p);v(T);const q=(i-1)*p,pe=q+p,re=g.slice(q,pe);u(re)}else u([]),v(1)},[a.value.updatedDevices,i,p]),y(()=>()=>{se()},[]),y(()=>{if(a.value.socketStatus==="connected"){const T=setTimeout(()=>{x(!1)},2e3);return()=>clearTimeout(T)}else x(!0)},[a.value.socketStatus]);const xe=Object.keys(a.value.updatedDevices).length;return t("div",{className:k.devices,children:[t("div",{id:"drivers-list",className:k.driversList,ref:s,children:l.map(g=>t(ps,{disabled:W,lampVisible:+a.value.updatedDevices[g][0]===a.value.testingDriverAddress,type:a.value.updatedDevices[g][1],address:a.value.updatedDevices[g][0],onClickSettings:()=>{S(e)(`/service/devices/${a.value.updatedDevices[g][0]}`)},onClickTest:()=>{te(+a.value.updatedDevices[g][0])}},a.value.updatedDevices[g][0]))}),t("div",{className:k.paginationBar2,children:[t("div",{style:{marginRight:"5px",visibility:i===1?"hidden":"visible",fontSize:"38px",left:"0"},className:k.arrowPagination,onClick:()=>c(g=>Math.max(g-1,1)),children:t(_e,{direction:"right"})}),t("div",{style:{marginLeft:"5px",visibility:i===f?"hidden":"visible",fontSize:"38px",right:"0"},className:k.arrowPagination,onClick:()=>c(g=>Math.min(g+1,f)),children:t(_e,{direction:"left"})}),t("div",{className:k.totalCount,children:xe}),t("div",{className:k.dotsWrapper,children:f>0&&t("div",{className:k.dots,children:Array.from({length:f}).map((g,T)=>t("span",{className:`${k.dot} ${i===T+1?k.active:""}`,onClick:()=>c(T+1)},T))})})]}),t("div",{className:k.wrapperBtn,children:W&&R==="connected"?t("div",{className:k.loadingText,children:t(ve,{})}):t(A,{children:[t(Q,{text:"Обновить",onClick:M}),t(Q,{text:"Поиск ",onClick:U})]})}),t(ue,{maxWidth:"md",open:r,onClose:()=>{},buttonsType:"single",singleButtonText:"Отмена",showCloseButton:!1,singleButtonAction:()=>{n(!1)},children:t(A,{children:t("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",gap:"40px",padding:"16px 0",marginBottom:"20px"},children:[t("div",{style:{display:"flex",flexDirection:"column"},children:[t(z,{text:"Новый поиск",onClick:()=>{S(ut)(),n(!1)}}),t("span",{style:{marginTop:"10px"},children:"Все адреса и настройки будут удалены"})]}),t("div",{style:{display:"flex",flexDirection:"column"},children:[t(z,{text:"Добавить новый драйвер",onClick:()=>{M(),n(!1)}}),t("span",{style:{marginTop:"10px"},children:"Все адреса и настройки будут сохранены"})]})]})})})]})}const Ws=()=>(H(),t(Is,{})),Ms="_devices_ug4pp_159",Ts="_wrapperBtn_ug4pp_167",ks="_content_ug4pp_204",Ss="_sliderWrapper_ug4pp_286",Ls="_buttonOnOff_ug4pp_296",Bs="_buttonOnOffActive_ug4pp_319",As="_rgbPanel_ug4pp_325",Rs="_open_ug4pp_342",B={devices:Ms,wrapperBtn:Ts,content:ks,sliderWrapper:Ss,buttonOnOff:Ls,buttonOnOffActive:Bs,rgbPanel:As,open:Rs},$s=({width:s=24,height:e=24,scale:r=1,color:n="#ffffff",className:i=""})=>{const c=typeof s=="number"?s*r:s,l=typeof e=="number"?e*r:e;return t("svg",{width:c,height:l,viewBox:"0 0 187.6 188.6",class:`muted-speaker-icon ${i}`,xmlns:"http://www.w3.org/2000/svg",style:{fill:n,flexShrink:0},children:[t("path",{d:"M88,0h12.6v100.6H88V0z"}),t("path",{d:`M136.8,10.5l-6.6,10.8c27.5,14,44.8,42.2,44.8,73c0,45.1-36.4,81.7-81.2,81.7s-81.2-36.7-81.2-81.7
        c0-28,14.3-54.1,37.9-69.1l8.7-5.8l-7.4-9.9l-8.6,5.4C16.2,32.3-0.1,62.2,0,94.3c0,52.1,42,94.3,93.8,94.3s93.8-42.2,93.8-94.3
        C187.6,59.1,168,26.8,136.8,10.5z`})]})},Gs="_sliderItem_af1fb_1",Os="_sliderValue_af1fb_70",ye={sliderItem:Gs,sliderValue:Os},X=({fromColor:s="#ff4757",toColor:e="#525252",withOutValue:r=!1,value:n,setValue:i,maxValue:c,minValue:l,field:u})=>{const f=F(null);y(()=>{if(f.current){const p=l??0,m=c??100,x=(n[u]-p)/(m-p)*100;f.current.style.setProperty("--value",`${x}%`),f.current.style.setProperty("--track-from",s),f.current.style.setProperty("--track-to",e)}},[n,s,e,u]);const v=p=>{const m=Number(p.target.value);i(D=>({...D,[u]:m}))};return t("div",{className:ye.sliderItem,children:[t(A,{}),t("span",{className:ye.sliderValue,children:r?null:`${n[u]}%`}),t("input",{ref:f,type:"range",min:l??0,max:c??100,value:n[u],onInput:v})]})},Es="_sliderItem_5cqvs_1",Ps="_sliderValue_5cqvs_48",we={sliderItem:Es,sliderValue:Ps},zs=({fromColor:s="#ff4757",toColor:e="#525252",value:r,setValue:n,maxValue:i,minValue:c,field:l})=>{const u=F(null);y(()=>{if(u.current){const v=c??0,p=i??100,D=(r.generalRange-v)/(p-v)*100;D>0?u.current.style.setProperty("--thumb-color","#f7e13e"):u.current.style.setProperty("--thumb-color","#424242"),u.current.style.setProperty("--value",`${D}%`),u.current.style.setProperty("--track-from",s),u.current.style.setProperty("--track-to",e)}},[r]);const f=v=>{const p=Number(v.target.value);n(m=>({...m,generalRange:p}))};return t("div",{className:we.sliderItem,children:[t("span",{className:we.sliderValue,children:[r.generalRange,"%"]}),t("input",{ref:u,type:"range",min:c??0,max:i??100,value:r.generalRange,onInput:f})]})},Fs={generalRange:0,r:0,g:0,b:0,w:0,light:0},Vs=()=>{const s=b.value.isLoadingUI||b.value.isLoadingIntervalStatus,[e,r]=_("LEVEL"),[n,i]=_(!1),[c,l]=_(Fs),u=F(!0),f=()=>e;return y(()=>{if(u.current){u.current=!1;return}const v=setTimeout(()=>{const p=f();p==="LEVEL"&&S(me,!1)({driver:"level",mode:"table",brightness:c.generalRange,addres:255}),p==="TW"&&S(me,!1)({driver:"tw",cmd:"broatcast",mode:"table",temperature:c.light,addres:255,brightness:c.generalRange})},300);return()=>clearTimeout(v)},[c]),console.log("drivermode",e),t("div",{className:B.devices,children:[t("div",{id:"drivers-list",className:B.content,children:t("div",{className:B.sliderWrapper,children:[t("div",{style:{display:"flex",justifyContent:"center"},children:t(z,{sx:{minWidth:"200px",fontSize:"30px",paddingTop:0,paddingBottom:0},text:`  ${e}`,onClick:()=>i(!0)})}),t("div",{style:{display:"flex",justifyContent:"flex-end",margin:"0 12px"},children:t("div",{className:`${B.buttonOnOff} ${c.generalRange>0?B.buttonOnOffActive:""}`,onClick:()=>{l(v=>({...v,generalRange:v.generalRange>0?0:100}))},children:t($s,{color:c.generalRange>0?"white":"grey"})})}),t("div",{className:`${B.rgbPanel} ${B.open} `,children:[t("div",{style:{display:"flex",width:"100%",flexDirection:"column"},children:t(zs,{fromColor:"#fff584",value:c,setValue:l,field:"light"})}),e==="RGBW"&&t("div",{style:{display:"flex",width:"100%"},children:t(X,{fromColor:"white",value:c,setValue:l,field:"w"})}),["TW","RGB+TW"].includes(e)&&t("div",{style:{display:"flex",width:"100%"},children:t(X,{withOutValue:!0,fromColor:"#cbe9fd",toColor:"#fef7cb",value:c,setValue:l,field:"light",minValue:2e3,maxValue:6e3})}),["RGB","RGB+TW","RGBW"].includes(e)&&t("div",{style:{display:"flex",width:"100%"},children:t(X,{fromColor:"#ff113a",value:c,setValue:l,field:"r"})}),["RGB","RGB+TW","RGBW"].includes(e)&&t("div",{style:{display:"flex",width:"100%"},children:t(X,{fromColor:"#26ff43",value:c,setValue:l,field:"g"})}),["RGB","RGB+TW","RGBW"].includes(e)&&t("div",{style:{display:"flex",width:"100%"},children:t(X,{fromColor:"#0466FF",value:c,setValue:l,field:"b"})})]})]})}),t(ue,{maxWidth:"sm",open:n,onClose:()=>i(!1),buttonsType:"none",children:t("div",{style:{display:"flex",flexDirection:"column",gap:"12px",padding:"20px",alignItems:"center"},children:[t("h3",{style:{color:"#fff",marginBottom:"8px",textAlign:"center"},children:"Выберите тип драйвера"}),["LEVEL","TW"].map(v=>t(z,{sx:{minWidth:"150px",fontSize:"30px",paddingTop:0,paddingBottom:0},text:v.toUpperCase(),onClick:()=>{r(v),i(!1)}},v))]})}),t("div",{className:B.wrapperBtn,children:s?t("div",{className:B.loadingText,children:t(ve,{})}):t(A,{})})]})};function Hs(){return t(ke,{children:t(gt,{children:t(Te,{children:[t(j,{path:"/service/devices",component:Ws}),t(j,{path:"/service/devices/:id",component:Se}),t(j,{path:"/settings",component:Ht}),t(j,{path:"/broadcast",component:Vs}),t(j,{default:!0,component:_t})]})})})}Me(t(Hs,{}),document.getElementById("app"));export{_e as A,Q as B,ve as L,Ys as S,G as a,Ne as b,a as c,pt as d,vt as e,Ks as f,Qs as g,Xs as p,b as s,H as u,S as w};
